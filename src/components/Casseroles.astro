---
import CasserolesIcon from './CasserolesIcon.astro';
---

<div id='menuCASSEROLES'>
  <CasserolesIcon />
</div>

<script is='inline'>
  const casserolesContainer = document.getElementById('menuCASSEROLES');

  // Fetch data from JSON file
  fetch('/data/cooking.json')
    .then((response) => response.json())
    .then((data) => {
      // Check if the specified category exists in the menu data
      const categoryData = data['CASSEROLES'];
      if (!categoryData) {
        console.error('CASSEROLES category not found in the menu data.');
        return;
      }
      // Check if any item is available in the category
      const anyItemAvailable = Object.values(categoryData).some(
        (item) => item.Available,
      );
      // If no item is available, hide the container
      if (!anyItemAvailable) {
        casserolesContainer.style.display = 'none';
        return;
      }
      // Generate HTML content for menu
      const categoryDiv = document.createElement('div');
      categoryDiv.classList.add('category');

      // Create heading for category
      const categoryHeading = document.createElement('h2');
      categoryHeading.classList.add('title');
      categoryHeading.textContent = 'CASSEROLES';
      categoryDiv.appendChild(categoryHeading);
      // Loop through items in the category
      for (const [itemName, itemData] of Object.entries(categoryData)) {
        if (itemData.Available) {
          const itemDiv = document.createElement('div');
          itemDiv.classList.add('item');

          // Create heading for item
          const itemHeading = document.createElement('div');
          itemHeading.classList.add('title');
          itemHeading.innerHTML += `<h3>${itemName}</h3> <div class="price">$${itemData.Price}</div>`;
          itemDiv.appendChild(itemHeading);

          // Create paragraph for item details
          const itemDetails = document.createElement('p');
          itemDetails.innerHTML = `${itemData.Description}`;
          itemDiv.appendChild(itemDetails);

          // Append item div to category divs
          categoryDiv.appendChild(itemDiv);
        }
      }
      // Append category div to grilled container
      casserolesContainer.appendChild(categoryDiv);
    })
    .catch((error) => console.error('Error fetching menu data:', error));
</script>
